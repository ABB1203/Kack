package game.entity.mob.AI;

import game.Game;
import game.entity.mob.Player;
import game.level.Level;

public class Gunner extends AI {

	public Gunner(Level level, Game game) {
		super(game);
		this.level = level;
		sprite = sprite.voidSprite;
		speed = 1;
		health = 2;
		randomTick = randomTick();
	}

	public void tick() {
		super.tick();

		Player player = game.getPlayer();

		tickCount++;

		if (seesPlayer(player)) {
			System.out.println("sees player");
		}

		if (tickCount >= randomTick) {
			tickCount = 0;
			randomTick = randomTick();

			double dx = player.getX() - x;
			double dy = player.getY() - y;

			if (random.nextInt(3) != 0 || (xDir != 0 && yDir != 0)) {
				if (seesPlayer(player) && random.nextInt(3) != 0 && !shot) {
					System.out.println("shoot");
					shot = true;
				} else shot = false;

				xDir = 0;
				yDir = 0;
			} else {
				if(seesPlayer(player)) {
					angle = Math.atan2(dy, dx) + Math.toRadians(random.nextInt(90) - 45);	
				} else {
					angle = Math.toRadians(random.nextInt(360));
				}
				xDir = Math.cos(angle) * speed;
				yDir = Math.sin(angle) * speed;
				shot = false;
			}

			/*
			 * if (random.nextInt(4) < 3 && seesPlayer(player)) {
			 * System.out.println("shhoot"); xDir = 0; yDir = 0; } else { angle
			 * = Math.atan2(dy, dx) + Math.toRadians(random.nextInt(90) - 45);
			 * xDir = Math.cos(angle) * speed; yDir = Math.sin(angle) * speed; }
			 */
		}

		move(xDir, yDir);

	}

}
